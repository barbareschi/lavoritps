<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Generatore Subnet Mask</title>
</head>
<body>
  <h3>Generatore Subnet Mask in binario</h3>

  <label for="prefixInput">Inserisci il prefix number (0â€“32): </label>
  <input type="number" id="prefixInput" min="0" max="32">
  <button onclick="generaSubnetMask()">Genera</button>

  <p><strong>Subnet mask in binario:</strong> <span id="outputBin"></span></p>
  <p><strong>Suffix:</strong> <span id="outputSuffix"></span></p>
  <p><strong>Numero di host:</strong> <span id="outputHosts"></span></p>

  <script>
    function generaSubnetMask() {
      const prefix = parseInt(document.getElementById("prefixInput").value);
      const outputBin = document.getElementById("outputBin");
      const outputSuffix = document.getElementById("outputSuffix");
      const outputHosts = document.getElementById("outputHosts");
 
      outputBin.textContent = "";
      outputSuffix.textContent = "";
      outputHosts.innerHTML = "";

      if (isNaN(prefix) || prefix < 0 || prefix > 32) {
        outputBin.textContent = "Errore: inserisci un numero tra 0 e 32.";
        return;
      }

      const fullOctets = Math.floor(prefix / 8);
      const remainingBits = prefix % 8;
      let maskBinary = [];

      for (let i = 0; i < fullOctets; i++) {
        maskBinary.push("11111111");
      }

      if (remainingBits > 0) {
        const partial = "1".repeat(remainingBits).padEnd(8, "0");
        maskBinary.push(partial);
      }

      while (maskBinary.length < 4) {
        maskBinary.push("00000000");
      }

      outputBin.textContent = maskBinary.join(".");

      const suffix = 32 - prefix;
      outputSuffix.textContent = suffix;

      const hostCount = Math.pow(2, suffix) - 2;

      outputHosts.innerHTML = `2<sup>${suffix}</sup> - 2 = ${hostCount.toLocaleString()}`;
    }
  </script>
</body>
</html>
