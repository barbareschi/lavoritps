<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Calcolatrice</title>
</head>
<body>

<h3>Calcolatrice</h3>

<input type="text" id="display" value="0" disabled>
<br><br>

<button onclick="aggiungi('7')">7</button>
<button onclick="aggiungi('8')">8</button>
<button onclick="aggiungi('9')">9</button>
<button onclick="aggiungi('+')">+</button><br>

<button onclick="aggiungi('4')">4</button>
<button onclick="aggiungi('5')">5</button>
<button onclick="aggiungi('6')">6</button>
<button onclick="aggiungi('-')">-</button><br>

<button onclick="aggiungi('1')">1</button>
<button onclick="aggiungi('2')">2</button>
<button onclick="aggiungi('3')">3</button>
<button onclick="aggiungi('*')">*</button><br>

<button onclick="aggiungi('0')">0</button>
<button onclick="aggiungi('.')">.</button>
<button onclick="calcola()">=</button>
<button onclick="aggiungi('/')">/</button><br><br>

<button onclick="radice()">√</button>
<button onclick="aggiungi('^')">xʸ</button>
<button onclick="percentuale()">%</button>
<button onclick="cancella()">C</button><br>

<button onclick="sin()">sin</button>
<button onclick="cos()">cos</button>
<button onclick="tan()">tan</button>

<script>
var schermo = document.getElementById("display");
var memoriaValore = 0;

function aggiungi(valore) {
    if (schermo.value === "0") {
        schermo.value = valore;
    } else {
        schermo.value += valore;
    }
}

function cancella() {
    schermo.value = "0";
}

function percentuale() {
    schermo.value = parseFloat(schermo.value) / 100;
}

function sin() {
    let n = parseFloat(schermo.value);
    schermo.value = Math.sin(n * Math.PI / 180);
}

function cos() {
    let n = parseFloat(schermo.value);
    schermo.value = Math.cos(n * Math.PI / 180);
}

function tan() {
    let n = parseFloat(schermo.value);
    schermo.value = Math.tan(n * Math.PI / 180);
}

function radice() {
    let n = parseFloat(schermo.value);
    schermo.value = Math.sqrt(n);
}

function memorizza() {
    memoriaValore = parseFloat(schermo.value);
}

function richiamamemoria() {
    schermo.value = memoriaValore;
}

function calcola() {
    let testo = schermo.value;
    let elementi = [];
    let numero = "";

    for (let i = 0; i < testo.length; i++) {
        let c = testo[i];
        if ((c >= '0' && c <= '9') || c === '.') {
            numero += c;
        } else {
            elementi.push(numero);
            elementi.push(c);
            numero = "";
        }
    }
    elementi.push(numero);

    for (let i = 1; i < elementi.length; i += 2) {
        if (elementi[i] === '^') {
            let a = parseFloat(elementi[i - 1]);
            let b = parseFloat(elementi[i + 1]);
            let r = Math.pow(a, b);
            elementi.splice(i - 1, 3, r.toString());
            i -= 2;
        }
    }

    for (let i = 1; i < elementi.length; i += 2) {
        if (elementi[i] === '*' || elementi[i] === '/') {
            let a = parseFloat(elementi[i - 1]);
            let b = parseFloat(elementi[i + 1]);
            let r = (elementi[i] === '*') ? a * b : a / b;
            elementi.splice(i - 1, 3, r.toString());
            i -= 2;
        }
    }

    for (let i = 1; i < elementi.length; i += 2) {
        let a = parseFloat(elementi[i - 1]);
        let b = parseFloat(elementi[i + 1]);
        let r = (elementi[i] === '+') ? a + b : a - b;
        elementi.splice(i - 1, 3, r.toString());
        i -= 2;
    }

    schermo.value = elementi[0];
}
</script>

</body>
</html>
